# Notes

1. Let's try to make it as generic as possible. So it would be the client responsibility to display it correctly.
   1. We should go into attributes / options approach instead of defining size and color on product itself
   2. Each variant should have a price and SKU
   3. Variants should be connected by some parent (for example T-Shirt has one name and description but multiple sizes
      and colors)
   4. Some variants could be out of stock or more expensive
2. Description should be markdown
   1. And support custom components (for example for creating drop-downs)
3. General Idea:
   1. Headless approach
   2. Tenant support
   3. 1st app - API for shop, so you can create your own shops - GraphQL using yoga
   4. 2nd app - actual store implementation using NextJS
   5. 3rd app - Admin panel for managing products, orders, customers, etc. - some web app with REST. Admin panel with xhtml.
   6. 4th app - Landing page - Astro ???
   7. AI Support - generating images and descriptions for products etc.

# Technical:

- [x] Reusable PriceMapper
- [x] Handle nulls better in Product price (do not allow `!` in general)
- [x] Move db schema closer to the modules
- [x] Introduce HashID as a resolver for ID scalar
- [x] Github
- [ ] Fly.io
  - [ ] Database setup - Neon
  - [ ] Add migration task
- [x] Handle errors generically (for example do not throw "Not found" string)
- [ ] Add linter for graphql and TS
- [ ] Run prettier and linter on generated by codegen files
- [ ] Data Loader for batching queries or something
- [ ] Consider price as graphql-scalar
- [ ] Consider using effect TS
- [ ] Add somehow those limits on graphql API
- [ ] MonoRepo
- [ ] Do I want to add headless component library with typical components for shop?
  - [ ] Filters
  - [ ] Categories
  - [ ] Product etc.

# API

Products:

- base
  - [x] query by slug
  - [x] paginated list of products
  - [ ] host assets somewhere
  - [ ] product details programmed (assets, images, variants)
  - [ ] similar products
  - [ ] product variants
- [ ] categories
  - [ ] products from category
  - [ ] categories can be nested (max 3 or something)
  - [ ] product can be part of many categories
- [ ] search
  - [ ] two approaches
    - [ ] test out index
    - [ ] dedicated db for search (mantine or something)
  - [ ] allow to sort
    - [ ] Make cursor a scalar
    - [ ] It shouldn't use raw ids otherwise hashid implementation doesn't have sense
  - [ ] better is last page calculation (needs to include count for all or something)
  - [ ] improve validation -> args should go through zed or other validation lib
  - [ ] make sure it is all paginated - we need to support multiple cursors https://medium.com/@george_16060/cursor-based-pagination-with-arbitrary-ordering-b4af6d5e22db
- [ ] auth
  - [ ] clerk?
- [ ] basket
  - [ ] redis?
- [ ] checkout
  - [ ] stripe?
- [ ] Example shop site built with the API (NextJS)
- [ ] Management project (NextJS)
  - [ ] With tutorial
  - [ ] Templates (for example clotching shop)
- Ideas:
  - [ ] MultiLanguage
  - [ ] upsell other - bought together. Based on statistics
- Tooling:
  - [ ] Dependabot / RenovateBot
  - [ ] Some AI powered code reviews for Github
  - [ ] Code audits
